<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>DRAFT: SCIM PROTOCOL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="SCIM PROTOCOL">
<meta name="keywords" content="SCIM">
<meta name="generator" content="xml2rfc v1.36 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">DRAFT</td><td class="header">T. Drake, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">UnboundID</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">C. Mortimore</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">SalesForce</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">May 14, 2011</td></tr>
</table></td></tr></table>
<h1><br />SCIM PROTOCOL</h1>

<h3>Abstract</h3>

<p>
                The Simple Cloud Identity Management (SCIM) specification is designed to make managing user identity in
                cloud based applications and services easier. The specification suite seeks to build upon experience
                with existing schemas and deployments, placing specific emphasis on simplicity of development and
                integration, while applying existing authentication, authorization, and privacy models. It's intent is
                to reduce the cost and complexity of user management operations by providing a common user schema and
                extension model, as well as binding documents to provide patterns for exchanging this schema using
                standard protocols. In essence, make it fast, cheap, and easy to move users in to, out of, and around
                the cloud.

                This document provides a REST API for exchanging User and User related resources via JSON and/or XML
            
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction and Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Intended Audience<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notat">1.2.</a>&nbsp;
Notational Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defs">1.3.</a>&nbsp;
Definitions<br />
<a href="#aa">2.</a>&nbsp;
Authentication and Authorization<br />
<a href="#Security">3.</a>&nbsp;
Security Considerations<br />
<a href="#api">4.</a>&nbsp;
API<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#create-user">4.1.</a>&nbsp;
Creating Users<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get-users-ops">4.2.</a>&nbsp;
Retrieving Users<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get-user">4.2.1.</a>&nbsp;
Retrieving a known User<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#query-users">4.2.2.</a>&nbsp;
Listing/Querying Users<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.2.3.</a>&nbsp;
Additional retrieval query parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.3.</a>&nbsp;
Editing a User<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#edit-user-with-put">4.3.1.</a>&nbsp;
Editing a User with PUT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#edit-user-with-patch">4.3.2.</a>&nbsp;
Editing a User with PATCH<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#delete-user">4.4.</a>&nbsp;
Removing a User<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schemas">4.5.</a>&nbsp;
Retrieving Service Provider Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get-schema">4.5.1.</a>&nbsp;
Retrieving a specific Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get-schemas">4.5.2.</a>&nbsp;
Retrieving all Service Provider supported Schemas<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#io-format">4.6.</a>&nbsp;
Data Input/Output Formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.7.</a>&nbsp;
HTTP Response Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#etags">4.8.</a>&nbsp;
Versioning Resources<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.9.</a>&nbsp;
HTTP Method Overloading<br />
<a href="#anchor11">5.</a>&nbsp;
Todos<br />
<a href="#anchor12">6.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction and Overview</h3>

<p>The SCIM Protocol is an application-level, REST protocol for provisioning and managing user identity on
                the web. The protocol supports creating, editing, deleting, querying and retrieving User resources.
            
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Intended Audience</h3>

<p>
                    This document is intended as a guide to SCIM API usage for both user identity providers and
                    consumers.
                
</p>
<a name="notat"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Notational Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
                    "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in
                    [RFC2119].
                
</p>
<a name="defs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Definitions</h3>

<blockquote class="text"><dl>
<dt>Service Provider:</dt>
<dd>A web application that provides User information via the SCIM
                        protocol.
                    
</dd>
<dt>Consumer:</dt>
<dd>A website or application that uses the SCIM protocol to manage Users managed
                        by the Service Provider.
                    
</dd>
<dt>Base URL:</dt>
<dd>The SCIM REST API is always relative to a Base URL for the API. The Base URL
                        MUST NOT contain any query string, as additional path information and query string variables MAY
                        be appended by Consumers as part of forming the request. Example: https://example.com/scim
                    
</dd>
<dt>Singular Attribute:</dt>
<dd>A User attribute that can appear at most once per User,
                        e.g.displayName.
                    
</dd>
<dt>Plural Attribute:</dt>
<dd>A User attribute that can appear multiple times per User, e.g.
                        emails
                    
</dd>
<dt>Simple Attribute:</dt>
<dd>A Singular attribute or Plural attribute whose value is a single
                        string attribute.
                    
</dd>
<dt>Complex Attribute:</dt>
<dd>A Singular attribute or Plural attribute whose value is an object
                        containing multiple sub-attribute attributes.
                    
</dd>
<dt>Primary Sub-Value:</dt>
<dd>The sub-attribute in a Complex attribute that should be used when
                        sorting or filtering by that attribute. Unless otherwise specified, the value sub-attribute is
                        always the Primary Sub-attribute.
                    
</dd>
<dt>Resource:</dt>
<dd>The Service Provider managed artifact; e.g., User or Group
                    
</dd>
</dl></blockquote>
<a name="aa"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Authentication and Authorization</h3>

<p>
                Authentication to the SCIM REST API is performed using OAuth2:
                http://tools.ietf.org/html/draft-ietf-oauth-v2-15
            
</p>
<p>
                For example:
            
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
            GET /resource/1 HTTP/1.1
            Host: example.com
            Authorization: Bearer h480djs93hd8
</pre></div>
<p>
                The context of the request (i.e. the user for whom data is being requested) MUST be inferred by Service
                Providers from the Base URL and the authorization credentials provided. The same Base URL MAY return
                information for different users depending on the authorization credentials provided.
            
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Security Considerations</h3>

<p>Securing the protocol:TBD
</p>
<a name="api"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
API</h3>

<p>
                The SCIM protocol specifies well known endpoints and operations for managing User and User discovery
                resources via standard HTTP methods:
            
</p>
<blockquote class="text"><dl>
<dt>GET</dt>
<dd>Retrieves a complete or partial Resource; e.g., User or Schema
                
</dd>
<dt>POST</dt>
<dd>Creates a new Resource; e.g., User or Schema
                
</dd>
<dt>PUT</dt>
<dd>Modifies a Resource with a complete, consumer specified Resource (replace)
                
</dd>
<dt>PATCH</dt>
<dd>Modifies a Resource with a set of consumer specified changes (partial update)
                
</dd>
<dt>DELETE</dt>
<dd>Deletes a Resource.
                
</dd>
</dl></blockquote><br /><hr class="insert" />
<a name="endpoint-summary"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">Resource</th><th align="left">Endpoint</th><th align="left">Operations</th><th align="left">Description</th></tr>
<tr>
<td align="left">User</td>
<td align="left">/User</td>
<td align="left"><a class='info' href='#get-user'>GET<span> (</span><span class='info'>Retrieving a known User</span><span>)</span></a>,
                    <a class='info' href='#create-user'>POST<span> (</span><span class='info'>Creating Users</span><span>)</span></a>,
                    <a class='info' href='#edit-user-with-put'>PUT<span> (</span><span class='info'>Editing a User with PUT</span><span>)</span></a>,
                    <a class='info' href='#edit-user-with-patch'>PATCH<span> (</span><span class='info'>Editing a User with PATCH</span><span>)</span></a>,
                    <a class='info' href='#delete-user'>DELETE<span> (</span><span class='info'>Removing a User</span><span>)</span></a>
                </td>
<td align="left">Read/Modify Users</td>
</tr>
<tr>
<td align="left">
                    User Query/Listing
                </td>
<td align="left">/Users</td>
<td align="left">
                    <a class='info' href='#query-users'>GET<span> (</span><span class='info'>Listing/Querying Users</span><span>)</span></a>
                </td>
<td align="left">Retrieve User via ad hoc queries</td>
</tr>
<tr>
<td align="left">User Schema</td>
<td align="left">
                    /Schema
                </td>
<td align="left">
                    <a class='info' href='#get-schema'>GET<span> (</span><span class='info'>Retrieving a specific Schema</span><span>)</span></a>
                </td>
<td align="left">Retrieve a specified User schema</td>
</tr>
<tr>
<td align="left">User Schemas</td>
<td align="left">
                    /Schemas
                </td>
<td align="left">
                    <a class='info' href='#get-schemas'>GET<span> (</span><span class='info'>Retrieving all Service Provider supported Schemas</span><span>)</span></a>
                </td>
<td align="left">Retrieve all Service Provider supported schemas</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Defined endpoints&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
                All requests to the Service Provider are made via
                <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9'>HTTP operations</a>
                on a URL derived from the Base URL. Responses are returned in the body of the HTTP response, formatted
                as JSON or XML, depending on what is requested. Response and error codes SHOULD be transmitted via the
                HTTP status code of the response (if possible), and SHOULD also be specified in the body of the
                response.
            
</p>
<a name="create-user"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Creating Users</h3>

<p>To create new Users, clients send POST requests to the User endpoint /User.
</p>
<p>Successful User creation is indicated with a 201 ("Created") response code. Upon successful creation,
                    the response body MUST contain the newly created Resource. Since the server is free to alter and/or
                    ignore POSTed content, returning the User can be useful to the client, enabling it to correlate the
                    client and server views of the new User.

                    When a User is created, its User URI must be returned in the response Location header.
                
</p>
<p>Below, the client sends a POST request containing a User
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
POST /User  HTTP/1.1
Host: example.com
Content-Type:  application/json
Authorization: Bearer h480djs93hd8
Content-Length: ...

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "userName": "bjensen@example.com",
  "name": {
    "familyName": "Jensen",
    "givenName": "Barbara"
  },
  "displayName": "Babs Jensen", "emails": [
    {
      "value": "bjensen@example.com",
      "type": "work",
      "primary": true
    }
  ]
}
</pre></div>
<p>The server signals a successful creation with a status code of 201. The response includes a Location
                    header indicating the User URI, and a representation of that User in the body of the response.
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 201 Created
Content-Type: application/json
Location: http://example.com/User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978

{
  "id" : "3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
  "errors" : [ ],  //TODO - not in core schema
  "success" : true //TODO - not in core schema
}

</pre></div>
<a name="get-users-ops"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Retrieving Users</h3>

<p>Users may be retrieved via opaque, unique URIs or via Query
</p>
<a name="get-user"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Retrieving a known User</h3>

<p>To retrieve a known User, clients send GET requests to the User endpoint /User/{id}.
</p>
<p>If the User exists the server responds with a status code of 200 and includes the User in the
                        body of the response.
                    
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1.1"></a><h3>4.2.1.1.&nbsp;
Example</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

GET /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

HTTP/1.1 200 OK
Content-Type: application/json

</pre></div>
<p>The server responds with:
                        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


HTTP/1.1 200 OK
Content-Type: application/json

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "id": "3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
  "externalId": "701984",
  "userName": "bjensen@example.com",
  "name": {
    "formatted": "Ms. Barbara J Jensen III",
    "familyName": "Jensen",
    "givenName": "Barbara",
    "middleName": "Jane",
    "honorificPrefix": "Ms.",
    "honorificSuffix": "III"
  },
    "displayName": "Babs Jensen",
    "nickName": "Babs",
    "profileUrl": "https://login.example.org/bjensen",
    "emails": [
      {
        "value": "bjensen@example.com",
        "type": "work",
        "primary": true
      },
      {
        "value": "babs@jensen.org",
        "type": "home"
      }
    ],
    "meta": {
     "created": "2010-03-25T15:11:18Z",
     "lastModified": "2011-05-27T16:37:25Z"
  }
}


</pre></div>
<a name="query-users"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
Listing/Querying Users</h3>

<p>
                        SCIM defines a standard set of operations that can be used to filter, sort, and paginate
                        response results. The operations are specified by adding query parameter to the Users endpoint.
                        Service Providers MAY support additional query parameters not specified here, and Providers
                        SHOULD ignore any query parameters they don't recognize.
                    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

GET /Users?attributes=userName,displayName
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json

{
  "totalResults": 3,
  "entry": [
    {
      "schemas": ["urn:scim:schemas:core:1.0"],
      "id": "3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
      "displayName": "Babs Jensen",
      "userName": "bjensen",
      "meta": {
        "location":"http://example.com/User/3f62ce30-..."
      }
    },
    {
      "schemas": ["urn:scim:schemas:core:1.0"],
      "id": "4f62ce30-dcd6-4dd7-abfe-2352a76f9978",
      "displayName": "Mandy Pepperidge",
      "userName": "mPepperidge",
      "meta": {
        "location":"http://example.com/User/4f62ce30-..."
      }
    },
    {
      "schemas": ["urn:scim:schemas:core:1.0"],
      "id": "5f62ce30-dcd6-4dd7-abfe-2352a76f9978",
      "displayName": "Noel Smith",
      "userName": "nsmith",
      "meta": {
        "location":"http://example.com/User/5f62ce30-..."
      }
    }
  ]
}
</pre></div>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.1"></a><h3>4.2.2.1.&nbsp;
Filtering</h3>

<p>
                            Filtering is used to limit the request results to Users that match given criteria. Content
                            filtering is accomplished by combining three request parameters:
                        
</p>
<blockquote class="text"><dl>
<dt>filterBy:</dt>
<dd>
                                Specifies the attribute name to filter by. If the specified attribute is a Plural
                                attribute, the User SHALL match if any of the instances of the given attribute match the
                                specified criterion (e.g. if a User has multiple emails values, only one has to match
                                for the entire User to match). If a Simple attribute is specified, its value must match
                                the specified filterValue according to the specified filterOp. If a Complex attribute is
                                specified, its Primary Sub-attribute must match. If the specified attribute is not a
                                direct child of the entry element, the full path MUST be specified using the '.'
                                character as separator. For example, to filter by userName the parameter value is
                                userName and to filter by first name, the parameter value is name.givenName.
                            
</dd>
<dt>filterOp:</dt>
<dd>
                                Specifies the comparison method used to evaluate the attribute value with the value of
                                the filter criterion.

                                Providers SHOULD support the following values:

                                
<blockquote class="text"><dl>
<dt>equals:</dt>
<dd>the two values must be identical strings. TODO: case
                                        sensitivity?
                                    
</dd>
<dt>contains:</dt>
<dd>the entire filterValue must be a substring of the attribute
                                        value.
                                    
</dd>
<dt>startswith:</dt>
<dd>the entire filterValue must be a substring of the
                                        attribute value, starting at the beginning of the attribute value. This
                                        criterion is satisfied if the two strings are equal.
                                    
</dd>
<dt>present:</dt>
<dd>if the attribute specified by filterBy has a non-empty value,
                                        or if it contains a non-empty node for complex attributes there is a match.
                                    
</dd>
</dl></blockquote>
                                Providers MAY support additional filter operations if they choose. Providers MUST
                                decline to filter results if the specified filter operation is not recognized

                            
</dd>
<dt>filterValue:</dt>
<dd>
                                Specifies the value to filter by, using the comparison method defined by filterOp. In
                                addition, requests can filter content based on their update timestamp: updatedSince:
                            
</dd>
</dl></blockquote>
<p>
                            Here are a few illustrative examples of filtering matches with filterBy, filterOp, and
                            filterValue. In each case, assume the following two Users will be returned if no filtering
                            parameters were provided:
                        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "id": "3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
  "externalId": "701984",
  "userName": "bjensen@example.com",
  "name": {
    "formatted": "Ms. Barbara J Jensen III",
  },
  "displayName": "Babs Jensen",
},
{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "id": "4d31ce30-dcd6-4dd7-abfe-2352a76f8852",
  "externalId": "563471",
  "userName": "jsmith@example.org",
  "name": {
    "formatted": "Mr. John Smith",
  },
  "displayName": "John Smith"
  }
}

</pre></div>
<p>
                            Given the parameters:
                        
</p>
<blockquote class="text"><dl>
<dt>filterBy=displayName&amp;filterOp=startswith&amp;filterValue=Babs:</dt>
<dd>
                                the first User (with id=3f62ce30-dcd6-4dd7-abfe-2352a76f9978) will match and be returned
                            
</dd>
<dt>filterBy=displayName&amp;filterOp=present:</dt>
<dd>
                                both Users will be returned
                            
</dd>
<dt>filterBy=email&amp;filterOp=contains&amp;filterValue=example.org:</dt>
<dd>
                                the second User (with id=4d31ce30-dcd6-4dd7-abfe-2352a76f8852) would match, as would it
                                be the only User to match given the parameters filterBy=email&amp; filterOp=present
                            
</dd>
</dl></blockquote>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.2"></a><h3>4.2.2.2.&nbsp;
Sorting</h3>

<p>Sorting allows requests to specify the order in which Users are returned.
</p>
<blockquote class="text"><dl>
<dt>sortBy:</dt>
<dd>
                                Specifies the attribute name whose value SHALL be used to order the returned Users. The
                                sort order is determine by the sortOrder parameter. If sortBy is a Singular Attribute,
                                users are sorted according to that attribute's value; if it's a Plural Attribute, Users
                                are sorted by the Value (or Major Value, if it's a Complex Attribute) of the attribute
                                marked with "primary": "true", if any, or else the first value in the list, if any, or
                                else they are sorted last if the given User has no data for the given attribute.
                            
</dd>
<dt>sortOrder:</dt>
<dd>
                                The order in which the sortBy parameter is applied. Allowed values are ascending and
                                descending. If a value for sortBy is provided and no sortOrder is specifies, the
                                sortOrder SHALL default to ascending. Sort order is expected to be case-insensitive
                                Unicode alphabetic sort order, with no specific locale implied.
                            
</dd>
</dl></blockquote>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.3"></a><h3>4.2.2.3.&nbsp;
Pagination</h3>

<p>The pagination parameters can be used together to "page through" a large number of results in
                            manageable chunks
                        
</p>
<blockquote class="text"><dl>
<dt>startIndex:</dt>
<dd>
                                Specifies the offset of the first result to be returned with respect to the list of
                                Users that would be returned if no startIndex were provided. For instance, if in a given
                                request 10 Users would normally be provided, if startIndex is 7 and no count is
                                specified, then only the last 3 Users in that list would be returned (Users are
                                zero-indexed). If startIndex is greater than or equal to the total number of results
                                that would be returned, no Users are returned. Value MUST be a non-negative integer and
                                defaults to 0 if no value is specified.
                            
</dd>
<dt>count:</dt>
<dd>
                                If non-zero, specifies the maximum number of Users the Consumer would like the Provider
                                to return at a time. Value MUST be a non-negative integer and defaults to 0 if no value
                                is specified. A count of 0 means that is up to the Provider to determine how many Users
                                to return by default (some Providers may return all Users by default; others may return
                                a fixed default number like 10). Providers SHOULD honor a very large count value, and
                                SHOULD support returning all Users at once when presented with a count request that is
                                larger than the number of Users the user has, but Providers MAY choose to never return
                                more than a Provider-determined maximum number of Users per request, if returning all
                                Users is too burdensome. In all cases, at most count Users SHALL be returned, starting
                                at startIndex and counting up from there. In each of these cases, Providers MUST
                                indicate the total number of Users they chose to return in the response using the
                                itemsPerPage response element.
                            
</dd>
</dl></blockquote>
<p>
                            For instance, on an initial query, specifying startIndex=0&amp;count=10 will return only the
                            first 10 results. The total number of possible results is indicated by the totalResults
                            attribute of results, so the client knows how many "pages" of results exist. A subsequent
                            query of startIndex=10&amp;count=10 will return the next 10 results, and so on.
                        
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.3"></a><h3>4.2.3.&nbsp;
Additional retrieval query parameters</h3>

<p>
                        Clients MAY request a partial User representation by specifying the query parameter
                        'attributes'. If non-empty, each User returned SHALL contain only the attributes explicitly
                        requested. The server MAY return a subset of the requested attributes if they are not supported.
                        This attribute is used for efficiency when the client only wishes to access a subset of the
                        attributes normally returned in results. The value is a comma separated list of top level
                        attribute names (e.g. id,name,emails) and defaults to an empty list which means it's up to the
                        Server which attributes to return. If extended schema attributes are specified the attribute
                        names MUST be fully qualified.
                    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978?attributes=displayName
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

HTTP/1.1 200 OK
Content-Type: application/json

</pre></div>
<p>Giving the response
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "displayName": "Babs Jensen"
}

</pre></div>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Editing a User</h3>

<a name="edit-user-with-put"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
Editing a User with PUT</h3>

<p>
                        PUT performs a full User update. Consumers must retrieve the entire User and PUT the desired
                        User modifications.
                    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
PUT /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "id": "3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
  "externalId": "701984",
  "userName": "bjensen@example.com",
  "name": {
    "formatted": "Ms. Barbara J Jensen III",
    "familyName": "Jensen",
    "givenName": "Barbara",
    "middleName": "Jane",
    "honorificPrefix": "Ms.",
    "honorificSuffix": "III"
  },
  "displayName": "Barbara Jensen",
  "nickName": "Babs",
  "profileUrl": "https://login.example.org/bjensen",
  "emails": [
    {
      "value": "bjensen@example.com",
      "type": "work",
      "primary": true
    },
    {
    "value": "babs@jensen.org",
    "type": "home"
    }
  ]
}
</pre></div>
<p>
                        The service responds with the entire, updated User
                    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json

{
 "schemas": ["urn:scim:schemas:core:1.0", "http://hrextension/"],
  "id": "3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
  "externalId": "701984",
  "userName": "bjensen@example.com",
  "name": {
   "formatted": "Ms. Barbara J Jensen III",
   "familyName": "Jensen",
   "givenName": "Barbara",
   "middleName": "Jane",
   "honorificPrefix": "Ms.",
   "honorificSuffix": "III"
 },
 "displayName": "Barbara Jensen",
 "nickName": "Babs",
 "profileUrl": "https://login.example.org/bjensen",
 "emails": [
   {
     "value": "bjensen@example.com",
     "type": "work",
     "primary": true
   },
   {
     "value": "babs@jensen.org",
     "type": "home"
   }
 ],
 "http://hrextension" : [
   {
     "gender": "female"
   },
   {
     "birthday": "1942-04-26"
   }
 ],
 "meta": {
   "created": "2010-03-25T15:11:18Z",
   "lastModified": "2011-05-27T16:37:25Z"
 }
}

</pre></div>
<a name="edit-user-with-patch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2"></a><h3>4.3.2.&nbsp;
Editing a User with PATCH</h3>

<p>PATCH enables consumers to send only those attributes requiring modification reducing network and
                        processing overhead. Attributes may be deleted, replaced or added in a single request.
                    
</p>
<blockquote class="text"><dl>
<dt>Deleting attribute values:</dt>
<dd>

                            Use the meta attribute to specify the attribute(s) to be deleted from the User. In the case
                            of plural attributes all attribute values will be deleted. The below request will delete the
                            “emails” attribute values.
                            <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


{
  "meta": {
    "attributes": [
      "emails"
    ]
  }
}
</pre></div>
                        
</dd>
<dt>Adding attributes (Singluar):</dt>
<dd>
                            If the User does not already contain a value for the specified attribute the attribute value
                            is added (or said another way “set”).
                        
</dd>
<dt>Adding attributes (Plural):</dt>
<dd>
                            If the User does not already contain the value the value is added to the attribute

                            <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


PATCH /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "emails": [
    {
      "value": "babs@exmaple.org",
      "type": "home"
    }
  ]
}
</pre></div>
                        
</dd>
<dt>Updating attributes (Singular):</dt>
<dd>
                            If the attribute value already exists the value is replaced by the value specified in the
                            request.
                            <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

PATCH /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

{
"schemas": ["urn:scim:schemas:core:1.0"],
"displayName":"Mrs Barbara Jensen"
}
</pre></div>

                            Singular, complex attributes may be partially merged by specifying only those attributes
                            intended for update.

                            <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


PATCH /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

{
"schemas": ["urn:scim:schemas:core:1.0"],
"name": {
  "familyName": "Smith"
  }
}
</pre></div>
                        
</dd>
<dt>Updating attributes (Plural):</dt>
<dd>


                            To replace the contents of a plural attribute specify the attribute name in the meta
                            attributes and specify all of the replacement attributes.

                            <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

PATCH /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "emails": [
    {
      "value": "babs@exmaple.org",
      "type": "home"
    },
    {
      "value": "babswork@exmaple.org",
      "type": "work"
    }
  ],
  "meta": {
    "attributes": "emails"
  }
}
</pre></div>
                        
</dd>
</dl></blockquote>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2.1"></a><h3>4.3.2.1.&nbsp;
Additional query parameters</h3>

<p>
                            Consumers MAY request a partial User representation by specifying the query parameter
                            'attributes'. If non-empty, each User returned SHALL contain only the attributes explicitly
                            requested. The server MAY return a subset of the requested attributes if they are not
                            supported. This attribute is used for efficiency when the client only wishes to access a
                            subset of the attributes normally returned in results. Value is a comma separated list of
                            top level attribute names (e.g. id,name,emails) and defaults to an empty list which means
                            it's up to the Server which attributes to return. For example:
                        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

PATCH /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978?attributes=userName,displayName
</pre></div>
<a name="delete-user"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Removing a User</h3>

<p>Consumers request User removal via DELETE. Service Providers MAY choose not to permenantly delete the
                    User, but MUST return a 404 error code for all PUT, PATCH, DELETE and GET operations with the User
                    id. Service Providers MUST also omit the User from query results.
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


DELETE /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Authorization: Bearer h480djs93hd8
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
</pre></div>
<p>Example: Consumer attempt to retrieve the previously deleted User
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


GET /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
Host: example.com
Authorization: Bearer h480djs93hd8
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 404 NOT FOUND
</pre></div>
<a name="schemas"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Retrieving Service Provider Schema</h3>

<p>Service Providers MUST support the core schema and MAY support additional schemas.
</p>
<a name="get-schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5.1"></a><h3>4.5.1.&nbsp;
Retrieving a specific Schema</h3>

<p>To retrieve schema send a GET request to /Schema/{resource}/{schema urn}.

                        Consumers may request the core User schema by omitting the schema URN; e.g.,/Schema/User/ or
                        specifying the core schema URN; e.g., /Schema/User/urn:scim:schemas:core:1.0
                    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


GET /Schema/User
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json

TBD

</pre></div>
<a name="get-schemas"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5.2"></a><h3>4.5.2.&nbsp;
Retrieving all Service Provider supported Schemas</h3>

<p>Consumers may request all supported schemas for a given resource via /Schemas/{resource}
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


GET /Schemas/User
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json
{
  "totalResults": 2,
  "entry": [
    {
      "name": "Core",
      "urn": "urn:scim:schemas:core:1.0",
      "description": "SCIM Core 1.0 User Schema",
      "meta": {
        "location":"http://example.com/Schema/User/urn:scim:schemas:core:1.0"
      }
    },
    {
      "name": "HR",
      "urn": "http://hrextension/",
      "description": "SCIM HR extension",
      "meta": {
        "location":"http://example.com/Schema/User/http://hrextension"
      }
    }
  ]
}

</pre></div>
<a name="io-format"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Data Input/Output Formats</h3>

<p>
                    Consumers SHOULD specify the format in which the data is submitted and MAY specify the desired
                    response data format. Consumers MAY indicate the desired format via an HTTP Accept Header;
                    e.g.,"Accept: application/json" or via URI suffix; e.g.,

                    </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

GET /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978.json
Host: example.com

GET /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978.xml
Host: example.com
</pre></div><p>


                
</p>
<p>
                    Service Providers MUST support the Accept Headers "Accept: application/json" for
                    <a href='http://json.org'>JSON</a>
                    and "Accept: application/xml" for
                    <a href='http://www.w3.org/XML/'>XML</a>
                    and MAY support additional formats if desired. The format defaults to JSON if no format is
                    specified. The data structure returned is equivalent in both formats; the only difference is in the
                    encoding of the data.
                
</p>
<p>
                    Singular attributes are encoded as string key/value pairs in JSON; e.g.,
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
"attribute": "value"
</pre></div>
<p> and tags with text content in XML; e.g.,
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;attribute&gt;value&lt;/attribute&gt;
</pre></div>
<p>
                    Plural attributes and Plural Bundles are encoded as arrays in JSON; e.g.,
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
"attributes": [ "value1", "value2" ]
</pre></div>
<p>
                     and repeated tags in XML; e.g.,
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;attributes&gt;value1&lt;/attributes&gt;
&lt;attributes&gt;value2&lt;/attributes&gt;
</pre></div>
<p>
                    Nodes with multiple sub-nodes are represented as objects in JSON; e.g,
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
"attribute": { "subattribute1": "value1", "subattribute2": "value2" }
</pre></div>
<p>
                     and repeated tags in XML; e.g.,
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;attribute&gt;
  &lt;subattribute1&gt;value1&lt;/subattribute1&gt;
  &lt;subattribute2&gt;value2&lt;/subattribute2&gt;
&lt;/attribute&gt;
</pre></div>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
HTTP Response Codes</h3>

<p>
                    The SCIM Protocol uses the response
                    <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html'>status codes defined in HTTP</a>
                    to indicate operation success or failure. Implementers SHOULD, per the HTTP specification, return
                    human-readable explanations for HTTP 4xx and 5xx responses. Additionally, implementers SHOULD handle
                    the identified errors as described below.
                
</p><br /><hr class="insert" />
<a name="http-error-handling-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Code</th><th align="left">Applicability</th><th align="left">Suggested Explanation</th></tr>
<tr>
<td align="left">400 BAD REQUEST</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Request is unparseable, syntactically incorrect, or violates schema</td>
</tr>
<tr>
<td align="left">401 UNAUTHORIZED</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Authorization failure</td>
</tr>
<tr>
<td align="left">403 FORBIDDEN</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Server does not support requested operation</td>
</tr>
<tr>
<td align="left">404 NOT FOUND</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Specified resource; e.g., User, does not exist</td>
</tr>
<tr>
<td align="left">409 CONFLICT</td>
<td align="left">POST,PUT,PATCH,DELETE</td>
<td align="left">The specified version number does not match the resource's latest version number or a Service
                        Provider refused to create a new, duplicate resource
                    </td>
</tr>
<tr>
<td align="left">412 PRECONDITION FAILED</td>
<td align="left">PUT,PATCH</td>
<td align="left">Failed to update as Resource {id} changed on the server since you last retrieved it</td>
</tr>
<tr>
<td align="left">500 INTERNAL SERVER ERROR</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">An internal error. Implementers SHOULD provide descriptive debugging advice</td>
</tr>
<tr>
<td align="left">501 NOT IMPLEMENTED</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Service Provider does not support the request operation; e.g., PATCH</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: Defined error cases&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="etags"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.8"></a><h3>4.8.&nbsp;
Versioning Resources</h3>

<p>
                    The API supports resource versioning via standard,<a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19'>HTTP ETags</a>.
                    Service providers MAY support both weak and strong ETags as the preferred mechanism for performing
                    conditional retrievals and ensuring consumers do not inadvertently overwrite each others changes,
                    respectively. When supported SCIM ETags SHOULD be specified as an HTTP header and SHOULD be
                    specified as an attribute within a Resource's 'meta' structure.
                
</p>
<p>The following example
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
POST /User  HTTP/1.1
Host: example.com
Content-Type:  application/json
Authorization: Bearer h480djs93hd8
Content-Length: ...

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "userName": "bjensen@example.com",
  "name": {
    "familyName": "Jensen",
    "givenName": "Barbara"
  }
}
</pre></div>
<p>The server responds with an ETag in the response header and meta structure.
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 201 Created
Content-Type: application/json
Location: http://example.com/User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
ETag: "e180ee84f0671b1"

{
  "schemas": ["urn:scim:schemas:core:1.0"],
  "id":"3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
  "userName": "bjensen@example.com",
  "name": {
    "familyName": "Jensen",
    "givenName": "Barbara"
  },
    "meta": {
     "created": "2010-03-25T15:11:18Z",
     "location":"http://example.com/User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978",
     "ETag": "\"e180ee84f0671b1\""
  }
}
</pre></div>
<p>With the returned ETag, Consumers can choose to retrieve the Resource only if the Resource has been
                    modified. In addition, if updating, specifying an ETag guarantees that previous updates will not be
                    overwritten. Note: Per the HTTP specification the ETag value is quoted.
                
</p>
<p>Conditional retrieval example using
                    <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26'>If-None-Match</a>
                    header:
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978?attributes=displayName
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
If-None-Match: "e180ee84f0671b1"

</pre></div>
<p>
                    If the Resource has not changed the Service Provider simply returns an empty body with a 304 "Not
                    Modified" response code.
                
</p>
<p>
                    Similarly, consumers may supply an
                    <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24'>If-Match</a>
                    ETag header for PUT, PATCH, and DELETE operations to ensure that the requested operation succeeds
                    only if the supplied ETag matches the latest Service Provider Resource; e.g., If-Match:
                    "e180ee84f0671b1"
                
</p>
<p>
                    To perform DELETE, PATCH, or PUT operations and override ETag versioning specify
                    <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24'>"If-Match: *"</a>
                    in lieu of an ETag header.
                
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.9"></a><h3>4.9.&nbsp;
HTTP Method Overloading</h3>

<p>In recognition that some clients, servers and firewalls prevent PUT, PATCH and DELETE operations a
                    client MAY override the POST operation by specifying the custom header "X-HTTP-Method-Override" with
                    the intended PUT, PATCH, DELETE operation. For example:
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

POST /User/3f62ce30-dcd6-4dd7-abfe-2352a76f9978
X-HTTP-Method-Override: DELETE
</pre></div>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Todos</h3>

<ol class="text">
<li>Additional Resources: Groups e.g., /Group(s) If so change user 'groups' semantics to 'memberOf')?
                
</li>
<li>Endpoint extension"Via extension a la schema e.g., /Device, /Service
                
</li>
<li>Binary Data handling. Suggest encode as base64. Need to jive with Schema, should provide api way to
                    skip binary attrs?
                
</li>
<li>Minimum attributes? Always include meta attributes?
                
</li>
<li>Attribute names should be case insensitive?
                
</li>
</ol>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgments</h3>

<p>Portable Contacts -
                <a href='http://www.portablecontacts.net/draft-spec.html'>Portable Contacts 1.0 Draft C</a>
            
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Trey Drake (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UnboundID</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:trey.drake@unboundid.com">trey.drake@unboundid.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chuck Mortimore</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SalesForce</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cmortimore@salesforce.com">cmortimore@salesforce.com</a></td></tr>
</table>
</body></html>